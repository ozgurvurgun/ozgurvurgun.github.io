<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>@ozgurvurgun | NestJS Mimarisi: Global Exception Handle (8. Bölüm)</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Hata Fırlatmak Yetmez, Yakalamak da Gerekir Hatalar kaçınılmaz. Ama kontrolsüz hata = üretimde patlayan sistem = sinirli müşteri = uykusuz geliştirici.
NestJS bu durumu çözmek için merkezî bir hata yakalama mekanizması sunar: Global Exception Filter
Şimdiye Kadar Ne Yaptık? Şöyle kodlar yazdık:
if (!userExists(id)) { throw new NotFoundException('Kullanıcı bulunamadı'); } Ve Nest bunu alıp güzelce 404 yanıtıyla döndü. Harika.
Ama ya özel bir hata sınıfı yazmak istiyorsan? Ya da her hatayı { status, errorCode, message, timestamp } gibi özel bir formatta döndürmek istiyorsan?"><meta property="og:image" content><meta property="og:title" content="NestJS Mimarisi: Global Exception Handle (8. Bölüm)"><meta property="og:description" content="Hata Fırlatmak Yetmez, Yakalamak da Gerekir Hatalar kaçınılmaz. Ama kontrolsüz hata = üretimde patlayan sistem = sinirli müşteri = uykusuz geliştirici.
NestJS bu durumu çözmek için merkezî bir hata yakalama mekanizması sunar: Global Exception Filter
Şimdiye Kadar Ne Yaptık? Şöyle kodlar yazdık:
if (!userExists(id)) { throw new NotFoundException('Kullanıcı bulunamadı'); } Ve Nest bunu alıp güzelce 404 yanıtıyla döndü. Harika.
Ama ya özel bir hata sınıfı yazmak istiyorsan? Ya da her hatayı { status, errorCode, message, timestamp } gibi özel bir formatta döndürmek istiyorsan?"><meta property="og:type" content="article"><meta property="og:url" content="https://ozgurvurgun.github.io/nestjs/10-nestjs-mimarisi-temel-kavramlar-8/"><meta property="article:section" content="nestJS"><meta property="article:published_time" content="2025-07-30T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-30T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NestJS Mimarisi: Global Exception Handle (8. Bölüm)"><meta name=twitter:description content="Hata Fırlatmak Yetmez, Yakalamak da Gerekir Hatalar kaçınılmaz. Ama kontrolsüz hata = üretimde patlayan sistem = sinirli müşteri = uykusuz geliştirici.
NestJS bu durumu çözmek için merkezî bir hata yakalama mekanizması sunar: Global Exception Filter
Şimdiye Kadar Ne Yaptık? Şöyle kodlar yazdık:
if (!userExists(id)) { throw new NotFoundException('Kullanıcı bulunamadı'); } Ve Nest bunu alıp güzelce 404 yanıtıyla döndü. Harika.
Ama ya özel bir hata sınıfı yazmak istiyorsan? Ya da her hatayı { status, errorCode, message, timestamp } gibi özel bir formatta döndürmek istiyorsan?"><script src=https://ozgurvurgun.github.io/js/feather.min.js></script>
<link href=https://ozgurvurgun.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://ozgurvurgun.github.io/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://ozgurvurgun.github.io/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css media="(prefers-color-scheme: dark)"><style>input[type=text],input[type=password]{font-size:16px!important;touch-action:manipulation}</style></head><body><div class=content><header><div class=main><a href=https://ozgurvurgun.github.io/>@ozgurvurgun</a></div><nav><a href=/>main</a>
<a href=/shorts>shorts</a>
<a href=/projects>projects</a>
<a href=/angular>angular</a>
<a href=/nestjs>nestJS</a>
<a href=/links>links</a>
<a href=/about>me</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>NestJS Mimarisi: Global Exception Handle (8. Bölüm)</h1><div class=meta>Posted on Jul 30, 2025</div></div><section class=body><h2 id=hata-fırlatmak-yetmez-yakalamak-da-gerekir>Hata Fırlatmak Yetmez, Yakalamak da Gerekir</h2><p>Hatalar kaçınılmaz.
Ama kontrolsüz hata = üretimde patlayan sistem = sinirli müşteri = uykusuz geliştirici.</p><p>NestJS bu durumu çözmek için merkezî bir hata yakalama mekanizması sunar:
<strong>Global Exception Filter</strong></p><h2 id=şimdiye-kadar-ne-yaptık>Şimdiye Kadar Ne Yaptık?</h2><p>Şöyle kodlar yazdık:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>userExists</span>(<span style=color:#a6e22e>id</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotFoundException</span>(<span style=color:#e6db74>&#39;Kullanıcı bulunamadı&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ve Nest bunu alıp güzelce 404 yanıtıyla döndü. Harika.</p><p>Ama ya özel bir hata sınıfı yazmak istiyorsan? Ya da her hatayı <code>{ status, errorCode, message, timestamp }</code> gibi özel bir formatta döndürmek istiyorsan?</p><p>O zaman devreye <strong>Global Exception Filter</strong> giriyor.</p><h2 id=catch-ile-özel-hataları-yakalamak>@Catch() ile Özel Hataları Yakalamak</h2><p>NestJS’te hata yakalamak için Exception Filter kullanılır.
Kendi filter’ını yazmak için <code>ExceptionFilter</code> arayüzünü uygularsın.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ExceptionFilter</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Catch</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ArgumentsHost</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>HttpException</span>,
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@nestjs/common&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Catch</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AllExceptionsFilter</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ExceptionFilter</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>exception</span>: <span style=color:#66d9ef>unknown</span>, <span style=color:#a6e22e>host</span>: <span style=color:#66d9ef>ArgumentsHost</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ctx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>host</span>.<span style=color:#a6e22e>switchToHttp</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>getResponse</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>status</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>exception</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HttpException</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>?</span> <span style=color:#a6e22e>exception</span>.<span style=color:#a6e22e>getStatus</span>()
</span></span><span style=display:flex><span>        <span style=color:#f92672>:</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span>(<span style=color:#a6e22e>status</span>).<span style=color:#a6e22e>json</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>status</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>timestamp</span>: <span style=color:#66d9ef>new</span> Date().<span style=color:#a6e22e>toISOString</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span>: <span style=color:#66d9ef>ctx.getRequest</span>().<span style=color:#a6e22e>url</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>exception</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>HttpException</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>?</span> <span style=color:#a6e22e>exception</span>.<span style=color:#a6e22e>getResponse</span>()
</span></span><span style=display:flex><span>        <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=uygulamaya-globally-tanıtmak>Uygulamaya Globally Tanıtmak</h2><p>Bu filter’ı tüm uygulama için aktif etmek istiyorsan <code>main.ts</code> dosyasına ekle:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bootstrap() {</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>NestFactory</span>.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>AppModule</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>useGlobalFilters</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AllExceptionsFilter</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#ae81ff>3000</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>bootstrap</span>();
</span></span></code></pre></div><p>Ve artık uygulama içinde hangi exception fırlatılırsa fırlatılsın bu yapıdan geçer.</p><h2 id=kendi-error-sınıflarını-da-yakalamak-mümkün>Kendi Error Sınıflarını da Yakalamak Mümkün</h2><p>Mesela:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomException</span> <span style=color:#66d9ef>extends</span> Error {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>message</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ve bunu yakalamak için sadece bu sınıfı hedef alan bir <code>@Catch(CustomException)</code> filter&rsquo;ı da yazabilirsin.</p><p>Bu da sana hataları ayrıştırma ve farklı yapılarla ele alma şansı verir.</p><h2 id=ne-kazanırsın>Ne Kazanırsın?</h2><ul><li>Hata mesajları tek bir yerden kontrol edilir</li><li>Tüm hatalar aynı formatta döner</li><li>Üretim ortamı için loglama sistemlerine entegre edilebilir</li><li>API istemcileri tutarlı response yapısı sayesinde kolay yönetilir</li></ul><h2 id=dürüst-gerçekler>Dürüst Gerçekler</h2><ul><li>Nest varsayılan Exception’ları zaten güzel işler - her şeyi özelleştirmen gerekmez</li><li>Eğer merkezi bir loglama (Sentry, Datadog vs.) kullanıyorsan bu sistemle kolay entegre olursun</li><li>Hataları her yere fırlatmak yerine, mantıklı yerlerde fırlatıp centralized yakalamak iyi bir mimaridir</li></ul><h2 id=özetle>Özetle</h2><ul><li>NestJS, <code>ExceptionFilter</code> yapısıyla hataları merkezi olarak ele almanı sağlar</li><li><code>@Catch()</code> dekoratörüyle özelleştirme yapabilirsin</li><li>Global olarak <code>main.ts</code> içinde <code>app.useGlobalFilters()</code> ile tanıtılır</li><li>Format birliği ve kontrol tek noktadan sağlanır</li><li>Loglama ve production-ready sistemler için vazgeçilmezdir</li></ul></section><div class=post-tags></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/ozgurvurgun rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://linkedin.com/in/ozgurvurgun1 rel=me title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/me.vcf rel=me title=VCF><i data-feather=phone></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/resume.pdf rel=me title=Resume><i data-feather=file-text></i></a>
<a class=border></a></div><div class=footer-info>2025 ozgurvurgun</div></footer><script>feather.replace()</script><script src=https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js></script>
<script>const keyInput=document.getElementById("key"),contentEl=document.getElementById("content"),encryptedText=contentEl.textContent.trim();keyInput.addEventListener("input",()=>{const e=keyInput.value.trim();if(!e){contentEl.textContent=encryptedText;return}try{const n=CryptoJS.AES.decrypt(encryptedText,e),t=n.toString(CryptoJS.enc.Utf8);if(!t)throw new Error("Çözülemedi");contentEl.textContent=t}catch{contentEl.textContent=encryptedText}})</script></div></body></html>