<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>@ozgurvurgun | NestJS Mimarisi: Business Logic Katmanı Olarak Servisler (13. Bölüm)</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="&ldquo;Business Logic&rdquo; Ne Demek? Kodda her şey teknik olmak zorunda değil. Bir de işin iş tarafı (business) var.
Kullanıcı kayıt olurken e-posta eşsiz olmalı
Bir ürün stoğu sıfırsa sepete eklenememeli
Hafta sonu sipariş geçersiz sayılmalı
Bunlar framework’le değil, iş modeliyle ilgili kurallardır. Ve işte bunlara business logic denir.
Peki Bu Kurallar Nereye Yazılır? Controller’a yazarsan: Kodun şişer. Test yazmak eziyet olur. Entity’ye yazarsan: Veritabanına fazla sorumluluk yüklersin. Pipe’a yazarsan: Genellikle sadece doğrulama yapılır."><meta property="og:image" content><meta property="og:title" content="NestJS Mimarisi: Business Logic Katmanı Olarak Servisler (13. Bölüm)"><meta property="og:description" content="&ldquo;Business Logic&rdquo; Ne Demek? Kodda her şey teknik olmak zorunda değil. Bir de işin iş tarafı (business) var.
Kullanıcı kayıt olurken e-posta eşsiz olmalı
Bir ürün stoğu sıfırsa sepete eklenememeli
Hafta sonu sipariş geçersiz sayılmalı
Bunlar framework’le değil, iş modeliyle ilgili kurallardır. Ve işte bunlara business logic denir.
Peki Bu Kurallar Nereye Yazılır? Controller’a yazarsan: Kodun şişer. Test yazmak eziyet olur. Entity’ye yazarsan: Veritabanına fazla sorumluluk yüklersin. Pipe’a yazarsan: Genellikle sadece doğrulama yapılır."><meta property="og:type" content="article"><meta property="og:url" content="https://ozgurvurgun.github.io/nestjs/15-nestjs-mimarisi-temel-kavramlar-13/"><meta property="article:section" content="nestJS"><meta property="article:published_time" content="2025-07-31T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-31T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NestJS Mimarisi: Business Logic Katmanı Olarak Servisler (13. Bölüm)"><meta name=twitter:description content="&ldquo;Business Logic&rdquo; Ne Demek? Kodda her şey teknik olmak zorunda değil. Bir de işin iş tarafı (business) var.
Kullanıcı kayıt olurken e-posta eşsiz olmalı
Bir ürün stoğu sıfırsa sepete eklenememeli
Hafta sonu sipariş geçersiz sayılmalı
Bunlar framework’le değil, iş modeliyle ilgili kurallardır. Ve işte bunlara business logic denir.
Peki Bu Kurallar Nereye Yazılır? Controller’a yazarsan: Kodun şişer. Test yazmak eziyet olur. Entity’ye yazarsan: Veritabanına fazla sorumluluk yüklersin. Pipe’a yazarsan: Genellikle sadece doğrulama yapılır."><script src=https://ozgurvurgun.github.io/js/feather.min.js></script>
<link href=https://ozgurvurgun.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://ozgurvurgun.github.io/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://ozgurvurgun.github.io/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css media="(prefers-color-scheme: dark)"><style>input[type=text],input[type=password]{font-size:16px!important;touch-action:manipulation}</style></head><body><div class=content><header><div class=main><a href=https://ozgurvurgun.github.io/>@ozgurvurgun</a></div><nav><a href=/>main</a>
<a href=/shorts>shorts</a>
<a href=/projects>projects</a>
<a href=/angular>angular</a>
<a href=/nestjs>nestJS</a>
<a href=/links>links</a>
<a href=/about>me</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>NestJS Mimarisi: Business Logic Katmanı Olarak Servisler (13. Bölüm)</h1><div class=meta>Posted on Jul 31, 2025</div></div><section class=body><h2 id=business-logic-ne-demek>&ldquo;Business Logic&rdquo; Ne Demek?</h2><p>Kodda her şey teknik olmak zorunda değil.
Bir de işin iş tarafı (business) var.</p><blockquote><p>Kullanıcı kayıt olurken e-posta eşsiz olmalı<br>Bir ürün stoğu sıfırsa sepete eklenememeli<br>Hafta sonu sipariş geçersiz sayılmalı</p></blockquote><p>Bunlar framework’le değil, iş modeliyle ilgili kurallardır.
Ve işte bunlara business logic denir.</p><h2 id=peki-bu-kurallar-nereye-yazılır>Peki Bu Kurallar Nereye Yazılır?</h2><ul><li>Controller’a yazarsan: Kodun şişer. Test yazmak eziyet olur.</li><li>Entity’ye yazarsan: Veritabanına fazla sorumluluk yüklersin.</li><li>Pipe’a yazarsan: Genellikle sadece doğrulama yapılır.</li><li>Service’e yazarsan: Tam olması gereken yer.</li></ul><blockquote><p>Service = business logic katmanı<br>Service -> Domain kurallarının merkezi</p></blockquote><h2 id=örnek-ürün-sepete-eklenmeden-önce-stok-kontrolü>Örnek: Ürün Sepete Eklenmeden Önce Stok Kontrolü</h2><p>Controller:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Post</span>(<span style=color:#e6db74>&#39;add-to-cart&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>addToCart</span>(<span style=color:#66d9ef>@Body</span>() <span style=color:#a6e22e>dto</span>: <span style=color:#66d9ef>AddToCartDto</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cartService</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>dto</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Injectable</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CartService</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>productService</span>: <span style=color:#66d9ef>ProductService</span>) {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>dto</span>: <span style=color:#66d9ef>AddToCartDto</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>product</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>productService</span>.<span style=color:#a6e22e>findById</span>(<span style=color:#a6e22e>dto</span>.<span style=color:#a6e22e>productId</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>product</span>.<span style=color:#a6e22e>stock</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BadRequestException</span>(<span style=color:#e6db74>&#39;Stokta yok&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Sepete ekleme işlemleri...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Sepete eklendi&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Bu kontrol &ldquo;stok yoksa işlem yapılamaz&rdquo; kuralı - yani business logic.
Bunun yeri controller değil, service’tir.</p><h2 id=business-logicte-nelere-dikkat-etmeli>Business Logic’te Nelere Dikkat Etmeli?</h2><ul><li>Response formatı veya HTTP statüsü burada olmamalı</li><li>Request nesnesi (req, res) burada olmamalı</li><li>Sadece girdiye göre karar verilmeli</li><li>Hatalar mantıklı exception’larla fırlatılmalı</li><li>Domain kuralları soyutlanabilir olmalı</li></ul><h2 id=domain-driven-designa-giriş-niteliğinde>Domain-Driven Design’a Giriş Niteliğinde</h2><p>Service katmanını iyi organize edersen:</p><ul><li>Uygulama büyüdüğünde çökmez</li><li>Yeni bir controller yazmadan aynı mantığı kullanabilirsin</li><li>Mikroservise geçişte bu yapıyı doğrudan taşırsın</li><li>Testlerini controller’a dokunmadan yazarsın</li></ul><blockquote><p>Business logic demek domain logic demektir.
Service, iş kurallarını temsil eder. API’yi değil.</p></blockquote><h2 id=kod-yapısı-nasıl-olmalı>Kod Yapısı Nasıl Olmalı?</h2><p>Kötü Örnek:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Post</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>createUser</span>(<span style=color:#66d9ef>@Body</span>() <span style=color:#a6e22e>dto</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>dto</span>.<span style=color:#a6e22e>email</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#e6db74>&#39;@&#39;</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BadRequestException</span>(<span style=color:#e6db74>&#39;Geçersiz email&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>User</span>(<span style=color:#a6e22e>dto</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>repo</span>.<span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>user</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>İyi Örnek:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Post</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>createUser</span>(<span style=color:#66d9ef>@Body</span>() <span style=color:#a6e22e>dto</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>userService</span>.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>dto</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Injectable</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserService</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>dto</span>: <span style=color:#66d9ef>CreateUserDto</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isValidEmail</span>(<span style=color:#a6e22e>dto</span>.<span style=color:#a6e22e>email</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BadRequestException</span>(<span style=color:#e6db74>&#39;Geçersiz email&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>User</span>(<span style=color:#a6e22e>dto</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>repo</span>.<span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>user</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>isValidEmail</span>(<span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>email</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#e6db74>&#39;@&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=sık-yapılan-hatalar>Sık Yapılan Hatalar</h2><ul><li>Business logic’i controller içinde tutmak</li><li>Her şeyi Pipe içine gömmeye çalışmak</li><li>Veritabanı işlemlerini doğrudan controller’da yapmak</li><li>Service yerine helper fonksiyonlara bulaşmak</li></ul><p>Bunların hepsi bir gün seni kod çorbası içinde boğar.</p><h2 id=unutma>Unutma</h2><blockquote><p>Service, HTTP ile ilgilenmez.
Sadece &ldquo;şartlar doğruysa şu işlem yapılır&rdquo; der.
O yüzden controller gider, router değişir, hatta transport layer değişir&mldr; ama business logic kalır.</p></blockquote><h2 id=özet>Özet</h2><ul><li>Service sadece utility sınıfı değil, iş kurallarının merkezidir</li><li>Business logic demek: &ldquo;Şartlar sağlandığında şu olur&rdquo; demektir</li><li>Kodun test edilebilir, tekrar kullanılabilir, sürdürülebilir olması buradan başlar</li><li>Domain-Driven Design mantığının temeli buraya oturur</li><li>Service içi logic temiz, bağımsız ve taşınabilir olmalı</li></ul></section><div class=post-tags></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/ozgurvurgun rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://linkedin.com/in/ozgurvurgun1 rel=me title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/me.vcf rel=me title=VCF><i data-feather=phone></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/resume.pdf rel=me title=Resume><i data-feather=file-text></i></a>
<a class=border></a></div><div class=footer-info>2025 ozgurvurgun</div></footer><script>feather.replace()</script><script src=https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js></script>
<script>const keyInput=document.getElementById("key"),contentEl=document.getElementById("content"),encryptedText=contentEl.textContent.trim();keyInput.addEventListener("input",()=>{const e=keyInput.value.trim();if(!e){contentEl.textContent=encryptedText;return}try{const n=CryptoJS.AES.decrypt(encryptedText,e),t=n.toString(CryptoJS.enc.Utf8);if(!t)throw new Error("Çözülemedi");contentEl.textContent=t}catch{contentEl.textContent=encryptedText}})</script></div></body></html>