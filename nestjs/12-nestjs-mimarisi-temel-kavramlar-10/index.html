<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>@ozgurvurgun | NestJS Mimarisi: Route Wildcard ve Prefixler (10. Bölüm)</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rota Yönetiminde Bir Seviye Yukarı: Wildcard ve Prefix Kullanımı Normalde rotaları şöyle tanımlarız:
@Controller('users') export class UserController { @Get() getAll() { ... } @Get(':id') getById(@Param('id') id: string) { ... } } Ama bazı durumlarda daha esnek tanımlamalar gerekebilir:
Tüm istekleri karşılayan bir “catch-all” route Belirli bir grup route’a ön ek tanımlama Statik dosyalar, client-side SPA fallback gibi durumlar İşte burada wildcard ve prefix kavramları devreye giriyor.
1. Route Prefix Nedir? Prefix, bir grup route’un başına otomatik olarak eklenen ortak path’tir."><meta property="og:image" content><meta property="og:title" content="NestJS Mimarisi: Route Wildcard ve Prefixler (10. Bölüm)"><meta property="og:description" content="Rota Yönetiminde Bir Seviye Yukarı: Wildcard ve Prefix Kullanımı Normalde rotaları şöyle tanımlarız:
@Controller('users') export class UserController { @Get() getAll() { ... } @Get(':id') getById(@Param('id') id: string) { ... } } Ama bazı durumlarda daha esnek tanımlamalar gerekebilir:
Tüm istekleri karşılayan bir “catch-all” route Belirli bir grup route’a ön ek tanımlama Statik dosyalar, client-side SPA fallback gibi durumlar İşte burada wildcard ve prefix kavramları devreye giriyor.
1. Route Prefix Nedir? Prefix, bir grup route’un başına otomatik olarak eklenen ortak path’tir."><meta property="og:type" content="article"><meta property="og:url" content="https://ozgurvurgun.github.io/nestjs/12-nestjs-mimarisi-temel-kavramlar-10/"><meta property="article:section" content="nestJS"><meta property="article:published_time" content="2025-07-30T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-30T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NestJS Mimarisi: Route Wildcard ve Prefixler (10. Bölüm)"><meta name=twitter:description content="Rota Yönetiminde Bir Seviye Yukarı: Wildcard ve Prefix Kullanımı Normalde rotaları şöyle tanımlarız:
@Controller('users') export class UserController { @Get() getAll() { ... } @Get(':id') getById(@Param('id') id: string) { ... } } Ama bazı durumlarda daha esnek tanımlamalar gerekebilir:
Tüm istekleri karşılayan bir “catch-all” route Belirli bir grup route’a ön ek tanımlama Statik dosyalar, client-side SPA fallback gibi durumlar İşte burada wildcard ve prefix kavramları devreye giriyor.
1. Route Prefix Nedir? Prefix, bir grup route’un başına otomatik olarak eklenen ortak path’tir."><script src=https://ozgurvurgun.github.io/js/feather.min.js></script>
<link href=https://ozgurvurgun.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://ozgurvurgun.github.io/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://ozgurvurgun.github.io/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css media="(prefers-color-scheme: dark)"><style>input[type=text],input[type=password]{font-size:16px!important;touch-action:manipulation}</style></head><body><div class=content><header><div class=main><a href=https://ozgurvurgun.github.io/>@ozgurvurgun</a></div><nav><a href=/>main</a>
<a href=/shorts>shorts</a>
<a href=/projects>projects</a>
<a href=/angular>angular</a>
<a href=/nestjs>nestJS</a>
<a href=/links>links</a>
<a href=/about>me</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>NestJS Mimarisi: Route Wildcard ve Prefixler (10. Bölüm)</h1><div class=meta>Posted on Jul 30, 2025</div></div><section class=body><h2 id=rota-yönetiminde-bir-seviye-yukarı-wildcard-ve-prefix-kullanımı>Rota Yönetiminde Bir Seviye Yukarı: Wildcard ve Prefix Kullanımı</h2><p>Normalde rotaları şöyle tanımlarız:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Controller</span>(<span style=color:#e6db74>&#39;users&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserController</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Get</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getAll() {</span> ... }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Get</span>(<span style=color:#e6db74>&#39;:id&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getById</span>(<span style=color:#66d9ef>@Param</span>(<span style=color:#e6db74>&#39;id&#39;</span>) <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span>) { ... }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Ama bazı durumlarda daha esnek tanımlamalar gerekebilir:</p><ul><li>Tüm istekleri karşılayan bir “catch-all” route</li><li>Belirli bir grup route’a ön ek tanımlama</li><li>Statik dosyalar, client-side SPA fallback gibi durumlar</li></ul><p>İşte burada wildcard ve prefix kavramları devreye giriyor.</p><h2 id=1-route-prefix-nedir>1. Route Prefix Nedir?</h2><p>Prefix, bir grup route’un başına otomatik olarak eklenen ortak path’tir.</p><h3 id=global-prefix>Global Prefix:</h3><p>Tüm uygulamanın başına bir ön ek eklemek için <code>main.ts</code> içinde:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>NestFactory</span>.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>AppModule</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>setGlobalPrefix</span>(<span style=color:#e6db74>&#39;api&#39;</span>);
</span></span></code></pre></div><blockquote><p>Artık tüm route&rsquo;lar <code>/api</code> ile başlar:
Örneğin <code>GET /users</code> -> <code>GET /api/users</code></p></blockquote><h2 id=versiyonlama-için-prefix-kullanımı>Versiyonlama için Prefix Kullanımı:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>setGlobalPrefix</span>(<span style=color:#e6db74>&#39;v1&#39;</span>);
</span></span></code></pre></div><p>veya dinamik:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>setGlobalPrefix</span>(<span style=color:#e6db74>&#39;api/v1&#39;</span>);
</span></span></code></pre></div><p>Bu yöntem, API sürümlerini yönetmenin basit ama etkili bir yoludur.</p><h2 id=2-controller-bazlı-prefix-decorator-üzerinden>2. Controller Bazlı Prefix (Decorator Üzerinden)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Controller</span>(<span style=color:#e6db74>&#39;auth&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthController</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Get</span>(<span style=color:#e6db74>&#39;login&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>login() {</span>} <span style=color:#75715e>// /auth/login
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Yani prefix sadece <code>setGlobalPrefix</code> ile değil,
<code>@Controller('prefix')</code> ile de tanımlanabilir.</p><p>Bunlar birbirinin üzerine bindirilebilir.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>setGlobalPrefix</span>(<span style=color:#e6db74>&#39;api&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Controller</span>(<span style=color:#e6db74>&#39;users&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// -&gt; /api/users
</span></span></span></code></pre></div><h2 id=3-route-wildcard-nedir>3. Route Wildcard Nedir?</h2><p>Wildcard = “joker” karakterdir. Belirli bir pattern’e uymayan istekleri karşılamak için kullanılır.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Controller</span>(<span style=color:#e6db74>&#39;*&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FallbackController</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Get</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>handleAll</span>(<span style=color:#66d9ef>@Req</span>() <span style=color:#a6e22e>req</span>: <span style=color:#66d9ef>Request</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`Böyle bir route yok: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Bu yapı, tanımlanmamış tüm GET isteklerini yakalar.
Özellikle Single Page Application (SPA) projelerinde, frontend&rsquo;e fallback yapılmak isteniyorsa ideal çözümdür.</p><h2 id=route-içinde-wildcard-kullanımı>Route İçinde Wildcard Kullanımı:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Get</span>(<span style=color:#e6db74>&#39;docs/*&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>handleDocs</span>(<span style=color:#66d9ef>@Req</span>() <span style=color:#a6e22e>req</span>: <span style=color:#66d9ef>Request</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`Docs yolu: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>Bu, tüm <code>docs/...</code> yollarını karşılar.
Yani <code>/docs/intro</code>, <code>/docs/setup</code>, <code>/docs/anything</code> hepsi bu method’a gelir.</p></blockquote><h2 id=4-all---tüm-http-metodlarını-yakalamak>4. @All() - Tüm HTTP Metodlarını Yakalamak</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@All</span>(<span style=color:#e6db74>&#39;*&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>handleAnything</span>(<span style=color:#66d9ef>@Req</span>() <span style=color:#a6e22e>req</span>: <span style=color:#66d9ef>Request</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`Method: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>method</span><span style=color:#e6db74>}</span><span style=color:#e6db74>, Path: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Bu, sadece path&rsquo;i değil aynı zamanda <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code> gibi tüm HTTP metodlarını kapsar.
Genelde fallback API handler&rsquo;larda, loglamalarda veya yetkisiz erişim yakalayıcılarında kullanılır.</p><h2 id=5-wildcard-kullanırken-nelere-dikkat-etmeli>5. Wildcard Kullanırken Nelere Dikkat Etmeli?</h2><ul><li>Sıralama önemli: NestJS route tanımlarını sırayla işler.
<code>@Get('*')</code> gibi wildcard route&rsquo;lar en sona bırakılmalıdır, aksi takdirde diğer route’lar çalışmaz.</li><li>Performance: Çok geniş wildcard tanımları (örneğin <code>*</code>) response time’ı etkileyebilir. Özellikle log veya proxy gibi yapılarda dikkatli ol.</li><li>Test yazmayı zorlaştırır: Her şeyi yakalayan controller, hata ayıklarken nereye düştüğünü anlamayı zorlaştırabilir.</li></ul><h2 id=ne-zaman-kullanılır-ne-zaman-kullanılmaz>Ne Zaman Kullanılır, Ne Zaman Kullanılmaz?</h2><table><thead><tr><th>Senaryo</th><th>Kullanım Uygun mu?</th></tr></thead><tbody><tr><td>SPA fallback (Angular, React, Vue frontend)</td><td>Evet</td></tr><tr><td>Tüm bilinmeyen route&rsquo;ları loglamak</td><td>Evet</td></tr><tr><td>Admin panel prefix yapısı</td><td>Evet</td></tr><tr><td>API sürümleme</td><td>Evet</td></tr><tr><td>Tüm rotaları tek <code>*</code> ile karşılamak</td><td>Hayır, kötü pratik</td></tr><tr><td>“Kodu az olsun” diye tüm path’leri wildcard yapmak</td><td>Çok kötü fikir</td></tr></tbody></table><h2 id=özet>Özet</h2><ul><li><code>setGlobalPrefix()</code> -> tüm uygulamanın path başına ön ek ekler</li><li><code>@Controller('prefix')</code> -> controller bazında ön ek tanımlar</li><li><code>@Get('*')</code>, <code>@All('*')</code> gibi wildcard tanımlarla bilinmeyen path’ler yakalanabilir</li><li>SPA uygulamalarında client-side route’lara düşmek için kullanılır</li><li>Dikkatsiz wildcard kullanımı diğer rotaların çalışmamasına yol açar</li><li>Wildcard route’lar en sona yazılmalı</li></ul></section><div class=post-tags></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/ozgurvurgun rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://linkedin.com/in/ozgurvurgun1 rel=me title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/me.vcf rel=me title=VCF><i data-feather=phone></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/resume.pdf rel=me title=Resume><i data-feather=file-text></i></a>
<a class=border></a></div><div class=footer-info>2025 ozgurvurgun</div></footer><script>feather.replace()</script><script src=https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js></script>
<script>const keyInput=document.getElementById("key"),contentEl=document.getElementById("content"),encryptedText=contentEl.textContent.trim();keyInput.addEventListener("input",()=>{const e=keyInput.value.trim();if(!e){contentEl.textContent=encryptedText;return}try{const n=CryptoJS.AES.decrypt(encryptedText,e),t=n.toString(CryptoJS.enc.Utf8);if(!t)throw new Error("Çözülemedi");contentEl.textContent=t}catch{contentEl.textContent=encryptedText}})</script></div></body></html>