<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>@ozgurvurgun | NestJS Mimarisi: Value, Class ve Factory Providers (14. Bölüm)</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Provider Ne Demekti? NestJS’de bir class veya değer, &ldquo;provider&rdquo; olarak tanımlanırsa constructor() içinde @Inject() ile enjekte edilebilir.
Yani dependency injection sistemine kayıtlı olur. Ama bu provider illa bir class olmak zorunda değil.
İşte tam burada 3 farklı yol devreye giriyor:
Tür Ne Sağlar? Ne Zaman Kullanılır? Value Provider Sabit bir değer (obj, string, sayı) Config, sabit ayarlar, env verileri Class Provider Alternatif class tanımı Mock servis, farklı implementasyonlar Factory Provider Fonksiyonla üretilen provider Dinamik yapı, config’e bağlı servis üretimi 1."><meta property="og:image" content><meta property="og:title" content="NestJS Mimarisi: Value, Class ve Factory Providers (14. Bölüm)"><meta property="og:description" content="Provider Ne Demekti? NestJS’de bir class veya değer, &ldquo;provider&rdquo; olarak tanımlanırsa constructor() içinde @Inject() ile enjekte edilebilir.
Yani dependency injection sistemine kayıtlı olur. Ama bu provider illa bir class olmak zorunda değil.
İşte tam burada 3 farklı yol devreye giriyor:
Tür Ne Sağlar? Ne Zaman Kullanılır? Value Provider Sabit bir değer (obj, string, sayı) Config, sabit ayarlar, env verileri Class Provider Alternatif class tanımı Mock servis, farklı implementasyonlar Factory Provider Fonksiyonla üretilen provider Dinamik yapı, config’e bağlı servis üretimi 1."><meta property="og:type" content="article"><meta property="og:url" content="https://ozgurvurgun.github.io/nestjs/16-nestjs-mimarisi-temel-kavramlar-14/"><meta property="article:section" content="nestJS"><meta property="article:published_time" content="2025-07-31T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-31T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NestJS Mimarisi: Value, Class ve Factory Providers (14. Bölüm)"><meta name=twitter:description content="Provider Ne Demekti? NestJS’de bir class veya değer, &ldquo;provider&rdquo; olarak tanımlanırsa constructor() içinde @Inject() ile enjekte edilebilir.
Yani dependency injection sistemine kayıtlı olur. Ama bu provider illa bir class olmak zorunda değil.
İşte tam burada 3 farklı yol devreye giriyor:
Tür Ne Sağlar? Ne Zaman Kullanılır? Value Provider Sabit bir değer (obj, string, sayı) Config, sabit ayarlar, env verileri Class Provider Alternatif class tanımı Mock servis, farklı implementasyonlar Factory Provider Fonksiyonla üretilen provider Dinamik yapı, config’e bağlı servis üretimi 1."><script src=https://ozgurvurgun.github.io/js/feather.min.js></script>
<link href=https://ozgurvurgun.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://ozgurvurgun.github.io/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://ozgurvurgun.github.io/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css media="(prefers-color-scheme: dark)"><style>input[type=text],input[type=password]{font-size:16px!important;touch-action:manipulation}</style></head><body><div class=content><header><div class=main><a href=https://ozgurvurgun.github.io/>@ozgurvurgun</a></div><nav><a href=/>main</a>
<a href=/shorts>shorts</a>
<a href=/projects>projects</a>
<a href=/angular>angular</a>
<a href=/nestjs>nestJS</a>
<a href=/links>links</a>
<a href=/about>me</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>NestJS Mimarisi: Value, Class ve Factory Providers (14. Bölüm)</h1><div class=meta>Posted on Jul 31, 2025</div></div><section class=body><h2 id=provider-ne-demekti>Provider Ne Demekti?</h2><p>NestJS’de bir class veya değer, &ldquo;provider&rdquo; olarak tanımlanırsa
constructor() içinde @Inject() ile enjekte edilebilir.</p><p>Yani dependency injection sistemine kayıtlı olur.
Ama bu provider illa bir class olmak zorunda değil.</p><p>İşte tam burada 3 farklı yol devreye giriyor:</p><table><thead><tr><th>Tür</th><th>Ne Sağlar?</th><th>Ne Zaman Kullanılır?</th></tr></thead><tbody><tr><td><strong>Value Provider</strong></td><td>Sabit bir değer (obj, string, sayı)</td><td>Config, sabit ayarlar, env verileri</td></tr><tr><td><strong>Class Provider</strong></td><td>Alternatif class tanımı</td><td>Mock servis, farklı implementasyonlar</td></tr><tr><td><strong>Factory Provider</strong></td><td>Fonksiyonla üretilen provider</td><td>Dinamik yapı, config’e bağlı servis üretimi</td></tr></tbody></table><h2 id=1-value-provider>1. Value Provider</h2><p>Bir sabit değer sistemin bir parçası olarak kullanılır.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>apiKey</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;abc123&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>baseUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;https://api.example.com&#39;</span>,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Module</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>provide</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;CONFIG&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>useValue</span>: <span style=color:#66d9ef>config</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppModule</span> {}
</span></span></code></pre></div><blockquote><p>Sabit verileri DI sistemine sokmanın en basit yolu</p></blockquote><h2 id=2-class-provider>2. Class Provider</h2><p>Normalde şöyle tanımlarız:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Module</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>EmailService</span>],
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Ama eğer <code>EmailService</code> yerine farklı bir class kullanılacaksa:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Module</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>provide</span>: <span style=color:#66d9ef>EmailService</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>useClass</span>: <span style=color:#66d9ef>MockEmailService</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Ya da string tokenla:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Module</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>provide</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;IEmailService&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>useClass</span>: <span style=color:#66d9ef>EmailService</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Kullanımı:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>@Inject</span>(<span style=color:#e6db74>&#39;IEmailService&#39;</span>) <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>emailService</span>: <span style=color:#66d9ef>EmailService</span>) {}
</span></span></code></pre></div><blockquote><p>Mocklama, test senaryosu, veya farklı implemantasyonlar için süper</p></blockquote><h2 id=3-factory-provider>3. Factory Provider</h2><p>En güçlü ve esnek yöntem.</p><p>Provider’ı bir fonksiyonla oluşturursun. Yani runtime’da veriye göre ne döneceğine sen karar verirsin.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>@Module</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>provide</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;DATABASE_URL&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>useFactory</span><span style=color:#f92672>:</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>NODE_ENV</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;prod&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;mongodb://prod-db&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;mongodb://localhost/dev&#39;</span>;
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Ve:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>@Inject</span>(<span style=color:#e6db74>&#39;DATABASE_URL&#39;</span>) <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>dbUrl</span>: <span style=color:#66d9ef>string</span>) {}
</span></span></code></pre></div><p>Dilersen başka dependency’ler de inject edebilirsin:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>useFactory</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>configService</span>: <span style=color:#66d9ef>ConfigService</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>configService</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#39;databaseUrl&#39;</span>);
</span></span><span style=display:flex><span>},
</span></span><span style=display:flex><span><span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>ConfigService</span>],
</span></span></code></pre></div><blockquote><p>Dinamik yapı isteyenler için biçilmiş kaftan</p></blockquote><h2 id=neden-bu-kadar-çeşit-var>Neden Bu Kadar Çeşit Var?</h2><p>Çünkü NestJS sadece class değil, her şeyi DI container’a dahil edebilsin istiyor.</p><p>Bu sistemin sana sundukları:</p><ul><li>Modülerlik</li><li>Mock edilebilirlik</li><li>Test kolaylığı</li><li>Ortam bazlı konfigürasyon desteği</li></ul><h2 id=tldr---ne-ne-için-kullanılır>TL;DR - Ne Ne İçin Kullanılır?</h2><table><thead><tr><th>Provider Türü</th><th>Kullanım Amacı</th></tr></thead><tbody><tr><td><code>useValue</code></td><td>Sabit bir değer sağlamak (env, config, sabit obj)</td></tr><tr><td><code>useClass</code></td><td>Alternatif implementasyonla inject etmek</td></tr><tr><td><code>useFactory</code></td><td>Runtime’da logic çalıştırarak provider oluşturmak</td></tr></tbody></table><h2 id=gerçek-hayattan-senaryolar>Gerçek Hayattan Senaryolar</h2><ul><li><code>useValue</code> -> <code>app.config.ts</code> içinde <code>ConfigService</code>’e sabitler vermek</li><li><code>useClass</code> -> Development ortamında <code>MockMailService</code>, production’da <code>SendGridMailService</code></li><li><code>useFactory</code> -> Request başına değişen servisler üretmek (örneğin tenant bazlı database bağlantısı)</li></ul><h2 id=dikkat-edilecek-noktalar>Dikkat Edilecek Noktalar</h2><ul><li><code>provide</code>: kısmı string ise <code>@Inject('TOKEN')</code> ile kullanılmalı</li><li><code>useClass</code>, <code>useValue</code>, <code>useFactory</code> birbirinin yerine geçemez</li><li>Factory provider içinde başka servisler kullanılacaksa <code>inject</code> mutlaka tanımlanmalı</li><li>Provider’lar <code>Module</code> içinde tanımlanmazsa inject edilemez</li></ul><h2 id=sonuç>Sonuç</h2><ul><li>NestJS provider sistemi sadece class’larla sınırlı değil</li><li>3 farklı yol (value, class, factory) ihtiyaca göre çözüm sunar</li><li>Uygulamanın esnekliği ve sürdürülebilirliği bu yapılarla kurulur</li><li>Test yazmak, ortam yönetimi, configurasyon gibi konularda vazgeçilmezdir</li></ul></section><div class=post-tags></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/ozgurvurgun rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://linkedin.com/in/ozgurvurgun1 rel=me title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/me.vcf rel=me title=VCF><i data-feather=phone></i></a>
<a class=border></a><a class=soc href=http://emre.xyz/resume.pdf rel=me title=Resume><i data-feather=file-text></i></a>
<a class=border></a></div><div class=footer-info>2025 ozgurvurgun</div></footer><script>feather.replace()</script><script src=https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js></script>
<script>const keyInput=document.getElementById("key"),contentEl=document.getElementById("content"),encryptedText=contentEl.textContent.trim();keyInput.addEventListener("input",()=>{const e=keyInput.value.trim();if(!e){contentEl.textContent=encryptedText;return}try{const n=CryptoJS.AES.decrypt(encryptedText,e),t=n.toString(CryptoJS.enc.Utf8);if(!t)throw new Error("Çözülemedi");contentEl.textContent=t}catch{contentEl.textContent=encryptedText}})</script></div></body></html>